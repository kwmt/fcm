machine:
  timezone:
    Asia/Tokyo
  environment:
    GOROOT: "$HOME/go"
    GOPATH: "$HOME/gopath"
    GO15VENDOREXPERIMENT: "1"
    PATH: "$GOROOT/bin:$GOPATH/bin:$PATH"
    GO_VERSION: "1.7.3"

checkout:
  post:
    - mkdir -p "$GOPATH/src"

test:
  pre:
    # 最新を使いたいので用意されているgoは削除
    - sudo rm -rf /usr/local/go
    # go をダウンロードしてインストール
    - wget https://storage.googleapis.com/golang/go$GO_VERSION.linux-amd64.tar.gz -O $HOME/golang$GO_VERSION.tar.gz
    - sudo tar zxf $HOME/golang$GO_VERSION.tar.gz -C $HOME
    - go version
    - cd $GOPATH/src/github.com/kwmt/fcm && go vet ./...


  override:
    - cd $GOPATH/src/github.com/kwmt/fcm && go test -bench . -benchmem

